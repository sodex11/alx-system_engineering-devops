<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>JS3 Basic Science — 100-Question Objective Test</title>
<style>
  :root{
    --bg:#f6f7fb;--card:#fff;--ink:#111;--muted:#555;
    --ok:#155e75;--okbg:#e0f2fe;
    --bad:#7f1d1d;--badbg:#fee2e2;
    --accent:#0a7;--primary:#056;--border:#e5e7eb
  }
  *{box-sizing:border-box}
  body{font-family:Inter,Segoe UI,Arial,sans-serif;background:var(--bg);color:var(--ink);margin:0}
  header{background:linear-gradient(90deg,#056,#0a7);color:#fff;padding:18px 10px;text-align:center}
  header h1{margin:.1rem 0 .2rem;font-size:1.35rem}
  header .sub{opacity:.95;font-size:.95rem}
  main{max-width:980px;margin:14px auto;padding:10px}
  .meta{display:flex;gap:10px;flex-wrap:wrap;align-items:center;margin:10px 0 14px}
  label.name{font-weight:600}
  input[type="text"]{padding:.6rem;border-radius:8px;border:1px solid var(--border);width:320px;max-width:100%}
  #timer{margin-left:auto;font-weight:700;background:#fff;padding:.35rem .6rem;border-radius:8px;border:1px solid var(--border)}
  .nav-row{display:flex;gap:8px;align-items:center;justify-content:space-between;margin:.25rem 0 1rem}
  .nav-row .pager{display:flex;gap:8px}
  .btn{border:0;border-radius:10px;padding:.55rem .9rem;cursor:pointer}
  .btn.ghost{background:#fff;border:1px solid var(--border)}
  .btn.primary{background:var(--primary);color:#fff}
  .btn.accent{background:var(--accent);color:#fff}
  .questions{display:grid;gap:.85rem}
  .q{background:var(--card);padding:12px;border-radius:10px;border:1px solid var(--border);box-shadow:0 2px 6px rgba(10,10,20,.05)}
  .q h4{margin:.2rem 0 .55rem;font-size:1rem;line-height:1.35}
  .answers label{display:block;cursor:pointer;padding:.35rem .5rem;border-radius:8px;border:1px solid transparent}
  .answers input{margin-right:.45rem}
  .answers label:hover{background:#f8fafc}
  .correct{background:var(--okbg)!important;border-color:#bae6fd}
  .correct .tag{color:var(--ok);font-weight:700}
  .wrong{background:var(--badbg)!important;border-color:#fecaca}
  .wrong .tag{color:var(--bad);font-weight:700}
  .submit-wrap{display:flex;gap:12px;align-items:center;margin-top:14px}
  .submit-wrap .left{display:flex;gap:8px;align-items:center}
  #result{margin-top:10px;font-weight:700}
  .summary{background:#fff;border:1px dashed #cbd5e1;border-radius:10px;padding:10px;margin-top:10px}
  .summary h5{margin:.2rem 0 .4rem}
  footer{margin:2rem 0;text-align:center;color:var(--muted);font-size:.9rem}
  .note{color:#064e3b;font-size:.9rem}
  .warn{color:#7f1d1d;font-size:.9rem}
  @media(max-width:700px){.nav-row{flex-direction:column;align-items:stretch}.nav-row .pager{justify-content:space-between}}
</style>
</head>
<body>
<header>
  <h1>JS3 Basic Science — Objective Test (100 Questions)</h1>
  <div class="sub">Sections A → D • 60 minutes • Continuous numbering</div>
</header>

<main>
  <form id="quizForm">
    <div class="meta">
      <label class="name">Student full name
        <input id="studentName" name="studentName" type="text" placeholder="Enter full name" required />
      </label>
      <div id="timer" aria-live="polite">Time left: 01:00</div>
    </div>

    <div class="nav-row" aria-label="navigation-not-submit">
      <div class="pager">
        <button type="button" class="btn ghost" id="toTop" aria-label="Go to top">↑ Top</button>
        <button type="button" class="btn ghost" id="toBottom" aria-label="Go to bottom">↓ Bottom</button>
      </div>
      <div class="pager">
        <button type="button" class="btn ghost" id="prevUnanswered" aria-label="Previous unanswered question">Previous Unanswered</button>
        <button type="button" class="btn ghost" id="nextUnanswered" aria-label="Next unanswered question">Next Unanswered</button>
      </div>
    </div>

    <section class="questions" id="questionsContainer"></section>

    <div class="submit-wrap">
      <div class="left">
        <button type="submit" class="btn primary" id="submitBtn">Submit answers</button>
        <span id="result" aria-live="polite"></span>
      </div>
    </div>

    <div id="breakdown" class="summary" hidden>
      <h5>Detailed feedback</h5>
      <div id="failedNumbers"></div>
      <hr>
      <ol id="failedList"></ol>
    </div>
  </form>
</main>

<footer>
  <div>Built for JS3 Basic Science • Auto-sends only failed questions to teacher email.</div>
</footer>

<script>
/* =========================
   QUIZ DATA (100 MCQs)
   ========================= */
/*
const questions = [
// ----- Section A: Light (1–30) -----
{q:"Light travels in:", opts:["Curved paths","Straight lines","Circles","Spirals"], a:"Straight lines"},
{q:"The straight line path of light is called a:", opts:["Beam","Ray","Flash","Line"], a:"Ray"},
{q:"A mirror with a flat surface is called a:", opts:["Concave mirror","Plane mirror","Convex mirror","Spherical mirror"], a:"Plane mirror"},
{q:"The ray of light striking a mirror is called the:", opts:["Reflected ray","Incident ray","Refracted ray","Normal ray"], a:"Incident ray"},
{q:"The line drawn perpendicular to the mirror at the point of incidence is called the:", opts:["Axis","Base","Normal","Tangent"], a:"Normal"},
{q:"In physics, 'normal' means:", opts:["Parallel","Straight","Perpendicular","Curved"], a:"Perpendicular"},
{q:"The angle between the incident ray and the normal is the:", opts:["Angle of reflection","Angle of refraction","Angle of incidence","Right angle"], a:"Angle of incidence"},
{q:"The angle between the reflected ray and the normal is the:", opts:["Angle of incidence","Angle of deviation","Angle of reflection","Straight angle"], a:"Angle of reflection"},
{q:"The law of reflection states that:", opts:["Angle of incidence = Angle of reflection","Angle of incidence = Angle of refraction","Angle of reflection > Angle of incidence","Light always bends"], a:"Angle of incidence = Angle of reflection"},
{q:"A ray diagram should always show:", opts:["Waves","Arrowheads on rays","Dots","Shadows"], a:"Arrowheads on rays"},
{q:"The bending of light as it passes from one medium to another is called:", opts:["Reflection","Refraction","Dispersion","Diffusion"], a:"Refraction"},
{q:"A medium is:", opts:["Any material that light passes through","A mirror surface","A type of lens","A prism"], a:"Any material that light passes through"},
{q:"The speed of light in air (approx) is:", opts:["225,000 km/s","200,000 km/s","300,000 km/s","150,000 km/s"], a:"300,000 km/s"},
{q:"The speed of light in water (approx) is:", opts:["225,000 km/s","300,000 km/s","200,000 km/s","250,000 km/s"], a:"225,000 km/s"},
{q:"The speed of light in glass (as given) is:", opts:["300,000 km/s","225,000 km/s","200,000 km/s","250,000 km/s"], a:"200,000 km/s"},
{q:"When light travels from air into glass, it:", opts:["Speeds up","Slows down","Stops","Scatters"], a:"Slows down"},
{q:"When light passes from glass into air, it:", opts:["Slows down","Speeds up","Becomes invisible","Disappears"], a:"Speeds up"},
{q:"Light bends _____ the normal when entering a denser medium.", opts:["Towards","Away from","Parallel to","Against"], a:"Towards"},
{q:"Light bends _____ the normal when leaving a denser medium into air.", opts:["Towards","Away from","Opposite","Below"], a:"Away from"},
{q:"A coin that appears when water is poured into a cup (though previously hidden) is due to:", opts:["Reflection","Refraction","Dispersion","Absorption"], a:"Refraction"},
{q:"The splitting of white light into its component colours is called:", opts:["Refraction","Dispersion","Reflection","Transmission"], a:"Dispersion"},
{q:"Newton used a _____ to split white light into colours.", opts:["Concave lens","Convex lens","Prism","Plane mirror"], a:"Prism"},
{q:"The band of colours seen when white light is split is called a:", opts:["Spectrum","Beam","Rainbow","Shade"], a:"Spectrum"},
{q:"White light commonly contains how many main colours in the spectrum?", opts:["5","6","7","8"], a:"7"},
{q:"The correct order of colours in the spectrum from red is remembered by:", opts:["VIBGYOR","ROYGBIV","RYOBVIG","BIVGYOR"], a:"ROYGBIV"},
{q:"Which colour is refracted the most in a prism?", opts:["Red","Yellow","Violet","Green"], a:"Violet"},
{q:"Which colour is refracted the least in a prism?", opts:["Blue","Green","Red","Violet"], a:"Red"},
{q:"A rainbow is formed due to:", opts:["Reflection only","Refraction and reflection inside water drops","Dispersion in air","Absorption of light"], a:"Refraction and reflection inside water drops"},
{q:"For a rainbow to be seen, the Sun must be:", opts:["Overhead","In front of the observer","Behind the observer","To the left of the observer"], a:"Behind the observer"},
{q:"'ROY G BIV' helps to remember:", opts:["Seven continents","Seven colours of the spectrum","Seven planets","Seven galaxies"], a:"Seven colours of the spectrum"},

// ----- Section B: Colour (31–45) -----
{q:"The three primary colours of light are:", opts:["Red, Yellow, Blue","Red, Green, Blue","Yellow, Green, Blue","Red, Orange, Violet"], a:"Red, Green, Blue"},
{q:"Red + Green light produces:", opts:["Blue","Yellow","Magenta","Cyan"], a:"Yellow"},
{q:"Red + Blue light produces:", opts:["Cyan","Magenta","Yellow","White"], a:"Magenta"},
{q:"Blue + Green light produces:", opts:["Yellow","Cyan","Magenta","Red"], a:"Cyan"},
{q:"Red + Green + Blue light together produce:", opts:["Black","White","Yellow","Violet"], a:"White"},
{q:"A red filter placed over white light will:", opts:["Transmit all colours","Transmit only red light","Transmit green and blue","Block only red"], a:"Transmit only red light"},
{q:"A green filter will primarily absorb which colours?", opts:["Green light","Red and blue light","All light","White light"], a:"Red and blue light"},
{q:"A white object appears white because it:", opts:["Reflects only red","Reflects all colours equally","Absorbs all colours","Reflects only green"], a:"Reflects all colours equally"},
{q:"A black object appears black because it:", opts:["Reflects all colours","Absorbs all colours","Reflects only red","Reflects only blue"], a:"Absorbs all colours"},
{q:"A yellow flower appears yellow because it:", opts:["Emits yellow light","Reflects yellow and absorbs other colours","Absorbs yellow light","Transmits all colours"], a:"Reflects yellow and absorbs other colours"},
{q:"Which of these is NOT one of the three primary colours of light?", opts:["Red","Green","Blue","Yellow"], a:"Yellow"},
{q:"Red and blue light mixed produce which colour?", opts:["Cyan","Magenta","Yellow","Black"], a:"Magenta"},
{q:"If a red cube is viewed under blue light it appears:", opts:["Red","Blue","Black","White"], a:"Black"},
{q:"A blue cube under red light appears:", opts:["Blue","Red","Black","White"], a:"Black"},
{q:"A white object in blue light will appear:", opts:["White","Blue","Black","Red"], a:"White"},

// ----- Section C: Galaxies (46–65) -----
{q:"Our galaxy is called the:", opts:["Andromeda","Milky Way","Canis Major","Universe"], a:"Milky Way"},
{q:"The Milky Way is a _____ galaxy.", opts:["Spiral","Elliptical","Irregular","Circular"], a:"Spiral"},
{q:"Most of the stars we see at night belong to:", opts:["Other galaxies","Our Milky Way galaxy","Canis Major galaxy","Elliptical galaxies"], a:"Our Milky Way galaxy"},
{q:"The force that holds galaxies together is:", opts:["Magnetism","Gravity","Friction","Pressure"], a:"Gravity"},
{q:"The estimated number of stars in the Milky Way (approx) is:", opts:["25 million","250 million","250 billion","250 trillion"], a:"250 billion"},
{q:"The nearest known galaxy to the Milky Way mentioned is:", opts:["Canis Minor","Canis Major Dwarf","Andromeda","Orion"], a:"Canis Major Dwarf"},
{q:"Scientists estimated the number of galaxies in the Universe to be about:", opts:["100,000","10 million","1 billion","100 billion"], a:"100 billion"},
{q:"Galaxies are made of:", opts:["Only stars","Stars, dust, and gas","Only dust","Planets only"], a:"Stars, dust, and gas"},
{q:"At light speed, crossing the Milky Way would take about:", opts:["10,000 years","100,000 years","1,000,000 years","1 billion years"], a:"100,000 years"},
{q:"The mass of the Milky Way is about _____ times the mass of the Sun (given):", opts:["1,500","15,000","1,500,000","1,500,000,000,000"], a:"1,500,000,000,000"},
{q:"A rainbow is formed due to:", opts:["Reflection only","Refraction and reflection inside water drops","Dispersion in air","Absorption of light"], a:"Refraction and reflection inside water drops"},
{q:"Newton used a prism to show:", opts:["Light bends","Light has seven colours","Light reflects","Light disappears"], a:"Light has seven colours"},
{q:"The Milky Way is part of which larger system?", opts:["Universe","Solar System","Local Cluster","Oort Cloud"], a:"Universe"},
{q:"Gravity is important in galaxies because:", opts:["It pushes stars apart","It holds stars together","It makes light bend","It creates asteroids"], a:"It holds stars together"},
{q:"Which object is NOT part of a galaxy?", opts:["Stars","Gas","Planets","Atoms of water"], a:"Atoms of water"},
{q:"Galaxies can be spiral, elliptical, or:", opts:["Square","Triangular","Irregular","Circular only"], a:"Irregular"},
{q:"Which is the nearest large spiral galaxy to the Milky Way?", opts:["Andromeda","Orion","Canis Major","Centaurus"], a:"Andromeda"},
{q:"The Milky Way contains about how many stars?", opts:["250 million","250 billion","250 trillion","250 thousand"], a:"250 billion"},
{q:"Crossing the Milky Way at light speed takes about:", opts:["10 years","1,000 years","100,000 years","1 billion years"], a:"100,000 years"},
{q:"The Milky Way is shaped like:", opts:["A line","A spiral disk","A cube","A pyramid"], a:"A spiral disk"},

// ----- Section D: Asteroids (66–100) -----
{q:"Asteroids are best described as:", opts:["Large planets","Small rocky objects orbiting the Sun","Stars","Moons"], a:"Small rocky objects orbiting the Sun"},
{q:"Most asteroids are found in the:", opts:["Milky Way","Universe","Asteroid belt","Moon’s orbit"], a:"Asteroid belt"},
{q:"The asteroid belt lies between the orbits of:", opts:["Earth and Mars","Mars and Jupiter","Jupiter and Saturn","Venus and Earth"], a:"Mars and Jupiter"},
{q:"The largest asteroid named in the text is:", opts:["Itokawa","Ceres","Vesta","Pallas"], a:"Ceres"},
{q:"Ceres was discovered in the year:", opts:["1601","1701","1801","1901"], a:"1801"},
{q:"Ceres has an approximate diameter of:", opts:["975 km","200 km","2,000 km","975 m"], a:"975 km"},
{q:"The typical shape of most asteroids is described as:", opts:["Perfectly round","Cube-like","Potato-shaped (irregular)","Pyramid"], a:"Potato-shaped (irregular)"},
{q:"Craters on asteroids like Ceres are formed by:", opts:["Volcanic eruptions","Impacts","Explosions inside","Earthquakes"], a:"Impacts"},
{q:"A small asteroid visited in 2005 and sampled by spacecraft is called:", opts:["Ceres","Itokawa","Pallas","Juno"], a:"Itokawa"},
{q:"Asteroids are believed to be:", opts:["Fragments left over from Solar System formation","Mini planets that never grew","Both A and B","None of the above"], a:"Both A and B"},
{q:"Most asteroids orbit the Sun between Mars and Jupiter in a region called the:", opts:["Kuiper belt","Oort cloud","Asteroid belt","Heliosphere"], a:"Asteroid belt"},
{q:"The smallest studied asteroid mentioned is about:", opts:["975 km across","2 m across","530 m across","250 km across"], a:"2 m across"},
{q:"Some asteroids are single solid rocks and spin quickly; this is because their gravity is:", opts:["Very strong","Weak","Variable","Infinite"], a:"Weak"},
{q:"Tidal forces can change an asteroid's shape when it:", opts:["Spins in place","Passes near a large planet","Is in deep space","Grows larger"], a:"Passes near a large planet"},
{q:"Scientists estimate a large asteroid impacts Earth about every:", opts:["1,300 years","13,000 years","130,000 years","1,300,000 years"], a:"130,000 years"},
{q:"Many small asteroids do not reach Earth's surface because they:", opts:["Break up in the atmosphere","Orbit the Moon instead","Sink into oceans","Pass by harmlessly"], a:"Break up in the atmosphere"},
{q:"Two reasons why asteroids impact Earth are:", opts:["Earth’s magnetic field and storms","Earth’s gravity and asteroid orbits passing close to Earth","Volcanic activity and tides","Human activity and moon phases"], a:"Earth’s gravity and asteroid orbits passing close to Earth"},
{q:"When drawing ray diagrams, which tool is recommended for accurate lines?", opts:["Freehand","Ruler and protractor","Pencil only","Scissors"], a:"Ruler and protractor"},
{q:"In the refraction example, when light passes from air into water, the angle of incidence compared to the angle of refraction is:", opts:["Smaller than the angle of refraction","Greater than the angle of refraction","Equal to the angle of refraction","Zero"], a:"Greater than the angle of refraction"},
{q:"When light passes from water into air, the refracted ray is bent:", opts:["Towards the normal","Away from the normal","Parallel to the normal","Perpendicular to the normal"], a:"Away from the normal"},
{q:"Which everyday device uses refraction to help people see more clearly?", opts:["Mirror","Prism","Lens (in glasses)","Filter"], a:"Lens (in glasses)"},
{q:"Which device did Newton use to show white light splits into colours?", opts:["Mirror","Glass block shaped like a triangle (prism)","Lens","Filter"], a:"Glass block shaped like a triangle (prism)"},
{q:"Which colour is refracted through the smallest angle in a prism experiment?", opts:["Violet","Blue","Green","Red"], a:"Red"},
{q:"Which colour is refracted through the largest angle in a prism experiment?", opts:["Red","Orange","Yellow","Violet"], a:"Violet"},
{q:"In the prism experiment, moving the screen closer to the prism causes the colours to:", opts:["Become more concentrated and possibly brighter","Spread out and dimmer","Disappear","Change order"], a:"Become more concentrated and possibly brighter"},
{q:"Moving the screen further away from the prism causes the colours to:", opts:["Become more concentrated","Spread out and possibly dimmer","Swap places","Turn black"], a:"Spread out and possibly dimmer"},
{q:"The process of using coloured filters to remove colours from white light is called:", opts:["Addition of light","Subtraction of light","Dispersion","Reflection"], a:"Subtraction of light"},
{q:"If green light shines on a red filter, the result will be:", opts:["Only green transmitted","Only red transmitted","No light transmitted","White light transmitted"], a:"No light transmitted"},
{q:"Which is an example of adding colours of light?", opts:["Using a red filter on white light","Overlapping red and green beams to get yellow","Filtering out blue with a yellow filter","Absorbing colours"], a:"Overlapping red and green beams to get yellow"}
]; */

const questions = [

// ---------- Section A: Magnetism Basics (1–25) ----------
{q:"Which of the following is a magnetic material?", opts:["Copper","Aluminium","Nickel","Glass"], a:"Nickel"},
{q:"Magnets always have:", opts:["One pole","Two poles","No poles","Changing poles"], a:"Two poles"},
{q:"The two poles of a magnet are called:", opts:["East and West","Positive and Negative","North and South","Up and Down"], a:"North and South"},
{q:"The region around a magnet where its force can be detected is called:", opts:["Magnetic zone","Magnetic field","Magnetic belt","Magnetic flux tube"], a:"Magnetic field"},
{q:"The magnetic field of a magnet is strongest at the:", opts:["Middle","Poles","Edges","Outer ring"], a:"Poles"},
{q:"A paperclip is only attracted to a magnet when it is:", opts:["In contact with the magnet","Inside the magnetic field","Heated","Electrified"], a:"Inside the magnetic field"},
{q:"The direction of a compass needle shows:", opts:["The strength of a magnet","The direction of the magnetic field lines","The weight of the magnet","The type of magnet"], a:"The direction of the magnetic field lines"},
{q:"Magnetic field lines always travel from:", opts:["South to North","North to South","West to East","East to West"], a:"North to South"},
{q:"Magnetic field lines never:", opts:["Start at the poles","End at the poles","Cross each other","Curve"], a:"Cross each other"},
{q:"If a magnet is stronger than another, its field lines will:", opts:["Be further apart","Extend further and be closer together","Vanish quickly","Remain the same"], a:"Extend further and be closer together"},
{q:"A compass contains:", opts:["A permanent magnet","A coil of copper","A rotating motor","A battery"], a:"A permanent magnet"},
{q:"Which of the following metals is magnetic?", opts:["Silver","Zinc","Cobalt","Lead"], a:"Cobalt"},
{q:"The shape of magnetic field lines around a bar magnet is:", opts:["Straight","Circular","Curved loops from N to S","Random"], a:"Curved loops from N to S"},
{q:"Magnetic field strength can be detected by:", opts:["Heat","Current","Movement of magnetic objects","Voltage"], a:"Movement of magnetic objects"},
{q:"The field around a horseshoe magnet is:", opts:["Weakest at poles","Strongest between poles","Uniform everywhere","Absent"], a:"Strongest between poles"},
{q:"A paperclip outside the magnetic field of a magnet will:", opts:["Be attracted","Not be attracted","Become magnetised","Gain electric charge"], a:"Not be attracted"},
{q:"The closer magnetic field lines are together, the field is:", opts:["Stronger","Weaker","Absent","Neutral"], a:"Stronger"},
{q:"When a paperclip touches a magnet, it becomes:", opts:["Demagnetised","Magnetised","Electrified","Non-magnetic"], a:"Magnetised"},
{q:"The unit of magnetic strength is:", opts:["Joule","Tesla","Newton","Watt"], a:"Tesla"},
{q:"Field lines between unlike poles show:", opts:["Repulsion","Attraction","No effect","Random pattern"], a:"Attraction"},
{q:"The main difference between a magnet and non-magnet is:", opts:["Weight","Presence of magnetic field","Colour","Size"], a:"Presence of magnetic field"},
{q:"Field lines between two like poles show:", opts:["Attraction","Repulsion","Neutralisation","Straight lines"], a:"Repulsion"},
{q:"If a magnet loses magnetism when heated, it is said to be:", opts:["Demagnetised","Energised","Polarised","Ionised"], a:"Demagnetised"},
{q:"Which of the following will NOT be attracted by a magnet?", opts:["Nickel spoon","Steel clip","Wooden stick","Iron pin"], a:"Wooden stick"},
{q:"The most common demonstration of magnetic field lines is by using:", opts:["Thermometers","Iron filings","Batteries","Wires"], a:"Iron filings"},

// ---------- Section B: Magnetic Interactions (26–45) ----------
{q:"Two north poles of magnets:", opts:["Attract","Repel","Neutralise","Do nothing"], a:"Repel"},
{q:"Two south poles of magnets:", opts:["Attract","Repel","Neutralise","Disappear"], a:"Repel"},
{q:"A north and a south pole:", opts:["Attract","Repel","Cancel each other","Disappear"], a:"Attract"},
{q:"Repulsion occurs because field lines between like poles:", opts:["Are in same direction","Are in opposite directions","Disappear","Bend randomly"], a:"Are in opposite directions"},
{q:"Attraction occurs because field lines between unlike poles:", opts:["Oppose each other","Are aligned in the same direction","Cancel out","Weaken"], a:"Are aligned in the same direction"},
{q:"Magnetic force between two magnets depends on:", opts:["Pole size only","Distance and strength of magnets","Colour of magnets","Shape of magnets only"], a:"Distance and strength of magnets"},
{q:"The field between attracting poles is:", opts:["Weak","Strong","Zero","Random"], a:"Strong"},
{q:"When like poles face each other, the field in the middle is:", opts:["Strong","Weak or cancelled","Constant","Reversed"], a:"Weak or cancelled"},
{q:"The force between poles can be shown by:", opts:["Voltage graph","Iron filings pattern","Colour change","Resistance chart"], a:"Iron filings pattern"},
{q:"If the distance between two magnets increases, the force:", opts:["Increases","Decreases","Remains constant","Reverses"], a:"Decreases"},
{q:"Which instrument detects magnetic interaction?", opts:["Voltmeter","Compass","Ammeter","Galvanometer"], a:"Compass"},
{q:"Repulsion proves that:", opts:["The magnets are strong","The poles are like","The magnets are weak","The poles are unlike"], a:"The poles are like"},
{q:"Attraction proves that:", opts:["The poles are unlike","The magnets are demagnetised","The magnets are weak","The poles are like"], a:"The poles are unlike"},
{q:"Field patterns of unlike poles show:", opts:["Curved lines joining poles","Straight disconnected lines","Random scattering","Empty space"], a:"Curved lines joining poles"},
{q:"When two magnets attract, the field lines:", opts:["Move apart","Come closer","Disappear","Cross each other"], a:"Come closer"},
{q:"Repulsion indicates:", opts:["Energy storage","Field opposition","Current in wires","Permanent magnetism"], a:"Field opposition"},
{q:"Magnetic field interactions are examples of:", opts:["Contact forces","Non-contact forces","Frictional forces","Mechanical forces"], a:"Non-contact forces"},
{q:"If a compass needle points away from a magnet, this shows:", opts:["Attraction","Repulsion","No field","Weak magnet"], a:"Repulsion"},
{q:"Stronger magnets create:", opts:["More spread out field lines","Closer field lines extending farther","Weaker attraction","Smaller poles"], a:"Closer field lines extending farther"},
{q:"Which law explains attraction and repulsion of poles?", opts:["Ohm’s Law","Coulomb’s Law (analogy)","Newton’s First Law","Faraday’s Law"], a:"Coulomb’s Law (analogy)"},

// ---------- Section C: Earth as a Magnet (46–65) ----------
{q:"The Earth behaves like a:", opts:["Capacitor","Magnet","Conductor","Resistor"], a:"Magnet"},
{q:"The Earth’s core is mainly made of:", opts:["Lead","Aluminium","Iron and Nickel","Zinc"], a:"Iron and Nickel"},
{q:"The Earth’s magnetic field originates from:", opts:["Mantle","Solid crust","Liquid outer core","Atmosphere"], a:"Liquid outer core"},
{q:"The north pole of a compass needle points towards:", opts:["Earth’s geographic south","Earth’s geographic north","Equator","Earth’s geographic east"], a:"Earth’s geographic north"},
{q:"The pole near Earth’s geographic north is actually a:", opts:["Magnetic north pole","Magnetic south pole","Neutral zone","Electric pole"], a:"Magnetic south pole"},
{q:"The Earth’s magnetic field helps protect us from:", opts:["Gravity","Solar radiation/charged particles","Earthquakes","Sound waves"], a:"Solar radiation/charged particles"},
{q:"The imaginary line joining Earth’s poles is called:", opts:["Equator","Magnetic axis","Magnetic equator","Geographic axis"], a:"Magnetic axis"},
{q:"Earth’s magnetic field can be detected using:", opts:["Iron filings","Compass","Voltmeter","Ammeter"], a:"Compass"},
{q:"The difference between magnetic north and geographic north is called:", opts:["Magnetic tilt","Magnetic inclination","Magnetic declination","Magnetic shift"], a:"Magnetic declination"},
{q:"The magnetic field around Earth is also called the:", opts:["Atmosphere","Magnetosphere","Ionosphere","Lithosphere"], a:"Magnetosphere"},
{q:"Earth’s magnetic field strength compared to a bar magnet is:", opts:["Stronger","About the same","Weaker","Infinite"], a:"Weaker"},
{q:"A compass needle aligns itself with:", opts:["Gravitational pull","Magnetic field lines of Earth","Light rays","Sound waves"], a:"Magnetic field lines of Earth"},
{q:"The Earth’s magnetic field changes slowly because:", opts:["Poles wander","The core is liquid","Field is unstable","All of the above"], a:"All of the above"},
{q:"The area around Earth where magnetic field traps solar wind is:", opts:["Troposphere","Magnetosphere","Mesosphere","Stratosphere"], a:"Magnetosphere"},
{q:"The Earth’s magnetic south pole lies near:", opts:["Geographic south pole","Geographic north pole","Equator","Prime meridian"], a:"Geographic north pole"},
{q:"Earth’s field lines outside travel from:", opts:["Magnetic south → north","Magnetic north → south","East → west","West → east"], a:"Magnetic north → south"},
{q:"The Earth’s magnetic poles move:", opts:["Constantly each year","Never","Once per century","Only during quakes"], a:"Constantly each year"},
{q:"The motion of molten iron in Earth’s outer core produces:", opts:["Electricity","Magnetism","Heat only","Gravity"], a:"Magnetism"},
{q:"The Earth’s magnetism is an example of a:", opts:["Permanent magnet","Electromagnet","Temporary magnet","Induced magnet"], a:"Electromagnet"},
{q:"Without Earth’s magnetic field, life would be affected by:", opts:["Lack of water","Solar radiation","Lack of oxygen","Heat imbalance"], a:"Solar radiation"},

// ---------- Section D: Electromagnets & Applications (66–90) ----------
{q:"An electromagnet is made by:", opts:["A coil of wire only","A coil of wire + current","A coil of wire + battery + iron core","Just a permanent magnet"], a:"A coil of wire + battery + iron core"},
{q:"The strength of an electromagnet depends on:", opts:["Number of turns in the coil","Current in the wire","Presence of soft iron core","All of the above"], a:"All of the above"},
{q:"Electromagnets are preferred over permanent magnets because:", opts:["They are stronger","They can be switched on/off","Strength can be varied","All of the above"], a:"All of the above"},
{q:"Which of these devices uses electromagnets?", opts:["Electric bell","Telephone receiver","Relay switch","All of the above"], a:"All of the above"},
{q:"The core used in an electromagnet is:", opts:["Copper","Aluminium","Soft iron","Steel"], a:"Soft iron"},
{q:"Which factor does NOT affect the strength of an electromagnet?", opts:["Number of turns","Current","Type of core","Colour of wire"], a:"Colour of wire"},
{q:"In an electric bell, the hammer hits the gong because:", opts:["It is pushed by air","It is pulled by an electromagnet","It is pushed by a battery","It is pulled by gravity"], a:"It is pulled by an electromagnet"},
{q:"When current is switched off in an electromagnet, the core becomes:", opts:["Permanently magnetic","Non-magnetic","Charged","Hot"], a:"Non-magnetic"},
{q:"A relay is an example of:", opts:["A permanent magnet","An electromagnet controlling another circuit","A motor","A battery"], a:"An electromagnet controlling another circuit"},
{q:"A loudspeaker works on the principle of:", opts:["Permanent magnets only","Electromagnetic induction","Electromagnets interacting with permanent magnets","Electrostatics"], a:"Electromagnets interacting with permanent magnets"},
{q:"To increase the strength of an electromagnet, you should:", opts:["Reduce coil turns","Decrease current","Insert a steel rod","Insert a soft iron core"], a:"Insert a soft iron core"},
{q:"Electromagnets are used in cranes to lift:", opts:["Wood","Plastic","Scrap iron/steel","Rubber"], a:"Scrap iron/steel"},
{q:"In a doorbell, the circuit is completed when:", opts:["Hammer strikes gong","Button is pressed","Magnet moves","Bell rings"], a:"Button is pressed"},
{q:"In an electromagnet, reversing current will:", opts:["Strengthen the magnet","Reverse polarity","Destroy the magnet","Remove field"], a:"Reverse polarity"},
{q:"An MRI scanner works with:", opts:["Gravity","Sound waves","Powerful electromagnets","Permanent magnets"], a:"Powerful electromagnets"},
{q:"An electromagnet is temporary because:", opts:["Magnetism remains","Magnetism disappears when current is off","It is made of steel","It is weak"], a:"Magnetism disappears when current is off"},
{q:"Electromagnets are not used in:", opts:["Transformers","Circuit breakers","Sewing machines","Scrap yard cranes"], a:"Sewing machines"},
{q:"The polarity of an electromagnet can be changed by:", opts:["Reversing current direction","Increasing coil length","Using copper instead of iron","Using more batteries"], a:"Reversing current direction"},
{q:"Which of these is a disadvantage of permanent magnets over electromagnets?", opts:["Cannot be switched off","Always strong","Cheap to make","Light weight"], a:"Cannot be switched off"},
{q:"The device that uses a small current to control a large one is a:", opts:["Transformer","Relay","Loudspeaker","Generator"], a:"Relay"},
{q:"In an electric bell, why does the hammer keep striking repeatedly?", opts:["The battery vibrates","The circuit breaks and remakes continuously","The current reverses automatically","The magnet rotates"], a:"The circuit breaks and remakes continuously"},
{q:"Which material is NOT suitable as an electromagnet core?", opts:["Soft iron","Steel","Iron powder","Ferrite"], a:"Steel"},
{q:"Electromagnets in speakers vibrate because of:", opts:["Gravitational pull","Interaction with permanent magnets","Air resistance","Friction"], a:"Interaction with permanent magnets"},
{q:"The magnetic effect of current was first discovered by:", opts:["Oersted","Faraday","Newton","Ampere"], a:"Oersted"},
{q:"A motor effect relies on:", opts:["Interaction of current in a coil and magnetic field","Heating effect of current","Gravitational field","Repulsion of charges"], a:"Interaction of current in a coil and magnetic field"},

// ---------- Section E: Magnetic Strength & Investigations (91–120) ----------
{q:"The strength of a magnet can be measured by:", opts:["Weight of paperclips lifted","Colour of field lines","Size of magnet only","Mass of the magnet"], a:"Weight of paperclips lifted"},
{q:"The more field lines in a diagram, the magnet is:", opts:["Weaker","Stronger","Neutral","Permanent"], a:"Stronger"},
{q:"A fair test in magnetism means:", opts:["Changing many variables","Keeping all variables same except one","Measuring without units","Repeating without method"], a:"Keeping all variables same except one"},
{q:"Which is a controlled variable in testing electromagnets?", opts:["Number of turns","Current","Type of core","All except the independent variable"], a:"All except the independent variable"},
{q:"Which is the dependent variable when testing magnet strength?", opts:["Current","Voltage","Number of paperclips lifted","Coil length"], a:"Number of paperclips lifted"},
{q:"Which is the independent variable in investigating electromagnets?", opts:["Number of turns on coil","Paperclips lifted","Weight of paperclips","Type of metal used for paperclips"], a:"Number of turns on coil"},
{q:"To make an experiment fair, one must:", opts:["Change two variables together","Change one variable and keep others constant","Avoid repeating","Use random materials"], a:"Change one variable and keep others constant"},
{q:"The accuracy of results increases when:", opts:["Experiments are not repeated","Many repeats are taken and averaged","Results are guessed","The strongest magnet is chosen"], a:"Many repeats are taken and averaged"},
{q:"Which factor increases accuracy in an electromagnet experiment?", opts:["Using more paperclips only","Repeating measurements and averaging","Changing current each time","Using different cores each time"], a:"Repeating measurements and averaging"},
{q:"If the independent variable is current, the dependent variable is:", opts:["Voltage applied","Strength of electromagnet","Number of turns","Type of core"], a:"Strength of electromagnet"},
{q:"A stronger electromagnet lifts:", opts:["Fewer paperclips","More paperclips","Same number always","None"], a:"More paperclips"},
{q:"Field line diagrams show magnetic field strength by:", opts:["Line length","Line thickness","Line closeness","Line colour"], a:"Line closeness"},
{q:"Which factor must be kept constant to test the effect of turns on an electromagnet?", opts:["Number of turns","Core type and current","Paperclips used","Coil thickness"], a:"Core type and current"},
{q:"If the electromagnet is too strong, the experiment may be unfair because:", opts:["Paperclips break","Paperclips stick permanently","Paperclips scatter","Results vanish"], a:"Paperclips stick permanently"},
{q:"Why is soft iron used as a core?", opts:["Cheap","Light","Quickly magnetises and demagnetises","Strong permanent magnet"], a:"Quickly magnetises and demagnetises"},
{q:"Steel is not used for cores because:", opts:["Expensive","Does not magnetise","Remains permanently magnetised","Heavy"], a:"Remains permanently magnetised"},
{q:"Which improves fairness in a magnetic experiment?", opts:["Using same size paperclips","Changing paperclips each time","Using different metals","Heating paperclips"], a:"Using same size paperclips"},
{q:"Which improves reliability of results?", opts:["Taking one reading","Repeating and averaging readings","Guessing results","Using bigger magnets"], a:"Repeating and averaging readings"},
{q:"The field around a stronger magnet compared to weaker one is:", opts:["The same","Larger and stronger","Smaller","Absent"], a:"Larger and stronger"},
{q:"The relationship between number of turns and strength of electromagnet is:", opts:["Directly proportional","Inversely proportional","Random","Constant"], a:"Directly proportional"},
{q:"When the current doubles, the strength of electromagnet:", opts:["Doubles approximately","Halves","Becomes zero","Unchanged"], a:"Doubles approximately"},
{q:"Which must remain constant in an investigation of electromagnets?", opts:["Independent variable","Control variables","Dependent variable","All variables"], a:"Control variables"},
{q:"Which is the best way to represent data from electromagnet experiments?", opts:["Drawing pictures","Bar chart or graph","Random tables","Story writing"], a:"Bar chart or graph"},
{q:"Which unit measures current in the coil?", opts:["Volt","Ampere","Tesla","Newton"], a:"Ampere"},
{q:"Which factor does NOT increase electromagnet strength?", opts:["More turns","More current","Adding iron core","Using aluminium core"], a:"Using aluminium core"},
{q:"Why is aluminium unsuitable as a core?", opts:["It is too soft","It is non-magnetic","It breaks","It corrodes"], a:"It is non-magnetic"},
{q:"Which is the independent variable in investigating the effect of current?", opts:["Number of turns","Current size","Paperclips lifted","Type of core"], a:"Current size"},
{q:"The stronger the electromagnet, the more:", opts:["Voltage is needed","Paperclips it lifts","Turns removed","Resistance it has"], a:"Paperclips it lifts"},
{q:"The electromagnet investigation is made fair by:", opts:["Keeping paperclip size and core constant","Using random metals","Changing two variables at once","Reversing polarity"], a:"Keeping paperclip size and core constant"},
{q:"The main purpose of repeating measurements in magnetism investigations is:", opts:["To waste time","To ensure accuracy and reliability","To make experiment shorter","To reduce cost"], a:"To ensure accuracy and reliability"},
];

/* =========================
   DOM BUILD
   ========================= */
const container = document.getElementById('questionsContainer');
questions.forEach((Q, i) => {
  const number = i + 1;
  const div = document.createElement('div');
  div.className = 'q';
  const h = document.createElement('h4');
  h.textContent = `${number}. ${Q.q}`;
  div.appendChild(h);

  const ans = document.createElement('div');
  ans.className = 'answers';
  Q.opts.forEach(opt => {
    const id = `q${i}-${sanitizeId(opt)}`;
    const lbl = document.createElement('label');
    lbl.setAttribute('for', id);
    const radio = document.createElement('input');
    radio.type='radio'; radio.name=`q${i}`; radio.value=opt; radio.id=id; radio.required=true;
    lbl.appendChild(radio);
    lbl.appendChild(document.createTextNode(' ' + opt));
    ans.appendChild(lbl);
  });
  div.appendChild(ans);
  container.appendChild(div);
});
function sanitizeId(s){ return s.replace(/[^a-z0-9]+/gi,'-'); }

/* =========================
   TIMER (90 minutes)
   ========================= */
let timeLeft = 1 * 60; // seconds
const timerEl = document.getElementById('timer');
const timerInterval = setInterval(()=>{
  if(timeLeft <= 0){
    clearInterval(timerInterval);
    timerEl.textContent = 'Time left: 00:00';
    document.getElementById('quizForm').requestSubmit();
    return;
  }
  const m = Math.floor(timeLeft/60).toString().padStart(2,'0');
  const s = (timeLeft%60).toString().padStart(2,'0');
  timerEl.textContent = `Time left: ${m}:${s}`;
  timeLeft--;
}, 1000);

/* =========================
   NAV CONTROLS
   ========================= */
document.getElementById('toTop').onclick = ()=>window.scrollTo({top:0,behavior:'smooth'});
document.getElementById('toBottom').onclick = ()=>window.scrollTo({top:document.body.scrollHeight,behavior:'smooth'});

function firstUnansweredIndex(step=+1){
  const total = questions.length;
  const qs = [...document.querySelectorAll('.q')];
  const mid = window.scrollY + window.innerHeight/2;
  let near = 0;
  qs.forEach((el,idx)=>{
    const r = el.getBoundingClientRect();
    const y = r.top + window.scrollY;
    if (y < mid) near = idx;
  });
  for(let k=1;k<=total;k++){
    const i = ((near + step*k) % total + total) % total;
    if(!document.querySelector(`input[name="q${i}"]:checked`)) return i;
  }
  return -1;
}
document.getElementById('nextUnanswered').onclick = ()=>{
  const idx = firstUnansweredIndex(+1);
  if(idx>=0) document.querySelectorAll('.q')[idx].scrollIntoView({behavior:'smooth',block:'center'});
};
document.getElementById('prevUnanswered').onclick = ()=>{
  const idx = firstUnansweredIndex(-1);
  if(idx>=0) document.querySelectorAll('.q')[idx].scrollIntoView({behavior:'smooth',block:'center'});
};

/* =========================
   SUBMIT / SCORE / FEEDBACK
   ========================= */
const form = document.getElementById('quizForm');
const result = document.getElementById('result');
const breakdown = document.getElementById('breakdown');
const failedNumbersEl = document.getElementById('failedNumbers');
const failedListEl = document.getElementById('failedList');

form.addEventListener('submit', async (e)=>{
  e.preventDefault();
  clearInterval(timerInterval);

  const name = document.getElementById('studentName').value.trim();
  if(!name){ alert('Please enter student name'); return; }

  const ok = confirm('Are you sure you want to submit your answers?');
  if(!ok) return;

  const formData = new FormData(form);
  let score = 0;
  const wrongs = [];
  const failedNumbers = [];

  document.querySelectorAll('.answers label').forEach(l => l.classList.remove('correct','wrong'));

  for(let i=0;i<questions.length;i++){
    const given = formData.get(`q${i}`);
    const correct = questions[i].a;
    const labels = [...document.querySelectorAll(`input[name="q${i}"]`)].map(inp=>inp.parentElement);

    labels.forEach(lbl=>{
      if(lbl.querySelector('input').value === correct){
        addTag(lbl,'Correct');
        lbl.classList.add('correct');
      }
    });

    if(given === correct){
      score++;
    }else{
      failedNumbers.push(i+1);
      const wrongLabel = document.querySelector(`input[name="q${i}"]:checked`)?.parentElement;
      if(wrongLabel){
        addTag(wrongLabel,'Your choice');
        wrongLabel.classList.add('wrong');
      }
      wrongs.push({number: i+1, question: questions[i].q, your_answer: given ?? "(no answer)", correct_answer: correct});
    }
  }

  result.textContent = `${name}: You scored ${score} / ${questions.length}.`;

  if(wrongs.length){
    breakdown.hidden = false;
    failedNumbersEl.textContent = `You missed these question numbers: ${failedNumbers.join(', ')}.`;
    failedListEl.innerHTML = '';
    wrongs.forEach(w=>{
      const li = document.createElement('li');
      li.innerHTML = `<strong>Q${w.number}.</strong> ${escapeHtml(w.question)}<br>
        <em>Your answer:</em> ${escapeHtml(w.your_answer)}<br>
        <em>Correct answer:</em> ${escapeHtml(w.correct_answer)}`;
      failedListEl.appendChild(li);
    });
  }else{
    breakdown.hidden = false;
    failedNumbersEl.textContent = 'Perfect! You did not miss any question.';
    failedListEl.innerHTML = '';
  }

  try {
    await fetch('https://formspree.io/f/mvgqwywl', {
      method:'POST',
      headers: {'Content-Type':'application/json'},
      body: JSON.stringify({
        subject: `Basic Science Quiz — ${name} — ${score}/${questions.length}`,
        message: `Student: ${name}\nScore: ${score}/${questions.length}\nFailed numbers: ${failedNumbers.join(', ') || 'None'}`,
        wrongs
      })
    });
    const note = document.createElement('div');
    note.className='note';
    note.textContent = 'Only the failed questions have been sent to the teacher email.';
    result.appendChild(document.createElement('br'));
    result.appendChild(note);
  } catch(err) {
    const warn = document.createElement('div');
    warn.className='warn';
    warn.textContent = 'Could not send results to email (network/CORS). Your score and feedback are shown above.';
    result.appendChild(document.createElement('br'));
    result.appendChild(warn);
  }
});
function addTag(label, text){
  if(label.querySelector('.tag')) return;
  const span = document.createElement('span');
  span.className = 'tag';
  span.style.marginLeft = '6px';
  span.textContent = `(${text})`;
  label.appendChild(span);
}
form.addEventListener('invalid', function(ev){
  ev.preventDefault();
  for(let i=0;i<questions.length;i++){
    if(!document.querySelector(`input[name="q${i}"]:checked`)){
      const el = document.querySelector(`input[name="q${i}"]`);
      if(el){ el.scrollIntoView({behavior:'smooth',block:'center'}); el.focus(); }
      break;
    }
  }
}, true);
function escapeHtml(s){ return String(s).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;'); }
</script>
</body>
</html>
